{"topologyName":"ClickStreamAnalysis_V3","config":"{\"topology.workers\":5,\"topology.acker.executors\":1,\"topology.message.timeout.secs\":30,\"clustersSecurityConfig\":[{}],\"topology.worker.childopts\":\"-Xmx2048m\"}","sources":[{"id":11,"topologyId":6,"topologyComponentBundleId":1,"versionId":6,"name":"Receive-ClickStream-Data","description":"","config":{"properties":{"cluster":"1","consumerGroupId":"kafka-group-3","retryDelayPeriodMs":2,"maximumUncommittedOffsets":10000000,"maxRecordsPerPoll":"500","maximumRetries":2147483647,"parallelism":1,"emitNullTuples":false,"partitionRefreshPeriodMs":2000,"securityProtocol":"PLAINTEXT","bootstrapServers":"mukiaf-546-1-0.field.hortonworks.com:6667","kafkaServiceName":"","retryDelayMaximumMs":10000,"fetchMaximumBytesPerPartition":"1048576","firstPollOffsetStrategy":"LATEST","sslTruststoreType":"JKS","clusters":"mukiaf","fetchMinimumBytes":"1","consumerStartupDelayMs":60000,"sslKeystoreType":"JKS","sslTrustManagerAlgo":"PKIX","retryInitialDelayMs":0,"sslKeyManagerAlgo":"SunX509","sslProtocol":"TLS","topic":"clickstream3","readerSchemaVersion":"","pollTimeoutMs":200,"offsetCommitPeriodMs":30000}},"outputStreams":[{"id":41,"versionId":6,"streamId":"kafka_stream_38","description":null,"topologyId":6,"fields":[{"name":"clickstream_id","type":"STRING","optional":false},{"name":"timestamp","type":"STRING","optional":true},{"name":"url","type":"STRING","optional":true},{"name":"user_session_id","type":"STRING","optional":true},{"name":"city","type":"STRING","optional":true},{"name":"state","type":"STRING","optional":true},{"name":"country","type":"STRING","optional":true},{"name":"timespent","type":"INTEGER","optional":true}],"timestamp":1528311233037}],"timestamp":1528224006979}],"sinks":[{"id":14,"topologyId":6,"topologyComponentBundleId":16,"versionId":6,"name":"DRUID","description":"","config":{"properties":{"cluster":"1","clusterReplication":1,"segmentGranularity":"MINUTE","indexRetryPeriod":"PT5M","maxBatchSize":2000,"maxPendingBatches":5,"discoveryPath":"/druid/discovery","clusterPartitions":1,"windowPeriod":"PT5M","aggregatorList":[{"count":{"name":"count"}},{"doublesum":{"name":"timespent_AVG_Aggregator","fieldName":"timespent_AVG"}}],"tranquilityZKconnect":"mukiaf-546-1-0.field.hortonworks.com:2181","discardStreamId":"DRUID-DISCARD-STREAM-ID","indexService":"druid/overlord","blockOnFull":true,"timestampField":"processingTime","lingerMillis":0,"queryGranularity":"MINUTE","dataSource":"clickstream_aggregate_1","clusters":"mukiaf","dimensions":["clickstream_id","user_session_id","city","state","country","url","timespent_AVG"]}},"timestamp":1528311233037},{"id":15,"topologyId":6,"topologyComponentBundleId":12,"versionId":6,"name":"Notify_CSR","description":"","config":{"properties":{"notifierName":"Email Notifier","parallelism":1,"className":"com.hortonworks.streamline.streams.notifiers.EmailNotifier","fieldValues":{"contentType":"text/plain","from":"mukisoomar@gmail.com","to":"muki.demo.2@gmail.com","subject":"Please Engage Customer - ${user_session_id}","body":"Customer with Session Id : ${user_session_id} spent more than 900 seconds on the URL: ${url}. Please engage with the customer and follow up."},"notificationStoreClassName":"","jarFileName":"notifiers-6c2c77c4-aa23-46f7-89c7-8979a83e0cd3.jar","properties":{"ssl":false,"starttls":true,"debug":false,"protocol":"smtp","auth":true,"username":"muki.demo.2@gmail.com","password":"HWX1234.","host":"smtp.gmail.com","port":587}}},"timestamp":1528311233037}],"processors":[{"id":12,"topologyId":6,"topologyComponentBundleId":5,"versionId":6,"name":"AGGREGATE","description":"","config":{"properties":{"rules":[8],"parallelism":1}},"outputStreams":[{"id":42,"versionId":6,"streamId":"window_transform_stream_39","description":null,"topologyId":6,"fields":[{"name":"clickstream_id","type":"STRING","optional":false},{"name":"user_session_id","type":"STRING","optional":false},{"name":"city","type":"STRING","optional":false},{"name":"state","type":"STRING","optional":false},{"name":"country","type":"STRING","optional":false},{"name":"url","type":"STRING","optional":false},{"name":"timespent_AVG","type":"DOUBLE","optional":false}],"timestamp":1528311233037},{"id":43,"versionId":6,"streamId":"window_notifier_stream_39","description":null,"topologyId":6,"fields":[{"name":"clickstream_id","type":"STRING","optional":false},{"name":"user_session_id","type":"STRING","optional":false},{"name":"city","type":"STRING","optional":false},{"name":"state","type":"STRING","optional":false},{"name":"country","type":"STRING","optional":false},{"name":"url","type":"STRING","optional":false},{"name":"timespent_AVG","type":"DOUBLE","optional":false}],"timestamp":1528311233037}],"timestamp":1528311233037},{"id":13,"topologyId":6,"topologyComponentBundleId":4,"versionId":6,"name":"TimeSpentOnProduct","description":"","config":{"properties":{"outputStreams":[{"id":"rule_transform_stream_9","schema":{"fields":[{"name":"clickstream_id","type":"STRING","optional":false},{"name":"user_session_id","type":"STRING","optional":false},{"name":"city","type":"STRING","optional":false},{"name":"state","type":"STRING","optional":false},{"name":"country","type":"STRING","optional":false},{"name":"url","type":"STRING","optional":false},{"name":"timespent_AVG","type":"DOUBLE","optional":false}]}},{"id":"rule_notifier_stream_9","schema":{"fields":[{"name":"clickstream_id","type":"STRING","optional":false},{"name":"user_session_id","type":"STRING","optional":false},{"name":"city","type":"STRING","optional":false},{"name":"state","type":"STRING","optional":false},{"name":"country","type":"STRING","optional":false},{"name":"url","type":"STRING","optional":false},{"name":"timespent_AVG","type":"DOUBLE","optional":false}]}}],"rules":[11]}},"outputStreams":[{"id":44,"versionId":6,"streamId":"rule_transform_stream_9","description":null,"topologyId":6,"fields":[{"name":"clickstream_id","type":"STRING","optional":false},{"name":"user_session_id","type":"STRING","optional":false},{"name":"city","type":"STRING","optional":false},{"name":"state","type":"STRING","optional":false},{"name":"country","type":"STRING","optional":false},{"name":"url","type":"STRING","optional":false},{"name":"timespent_AVG","type":"DOUBLE","optional":false}],"timestamp":1528311233037},{"id":45,"versionId":6,"streamId":"rule_notifier_stream_9","description":null,"topologyId":6,"fields":[{"name":"clickstream_id","type":"STRING","optional":false},{"name":"user_session_id","type":"STRING","optional":false},{"name":"city","type":"STRING","optional":false},{"name":"state","type":"STRING","optional":false},{"name":"country","type":"STRING","optional":false},{"name":"url","type":"STRING","optional":false},{"name":"timespent_AVG","type":"DOUBLE","optional":false}],"timestamp":1528311233037}],"timestamp":1528311233037}],"edges":[{"id":52,"versionId":6,"topologyId":6,"fromId":11,"toId":12,"streamGroupings":[{"streamId":41,"grouping":"FIELDS","fields":["clickstream_id","user_session_id","city","state","country","url"]}],"timestamp":1528311233037},{"id":53,"versionId":6,"topologyId":6,"fromId":12,"toId":13,"streamGroupings":[{"streamId":42,"grouping":"SHUFFLE","fields":null}],"timestamp":1528311233037},{"id":54,"versionId":6,"topologyId":6,"fromId":12,"toId":14,"streamGroupings":[{"streamId":42,"grouping":"SHUFFLE","fields":null}],"timestamp":1528311233037},{"id":55,"versionId":6,"topologyId":6,"fromId":13,"toId":15,"streamGroupings":[{"streamId":45,"grouping":"SHUFFLE","fields":null}],"timestamp":1528311233037}],"rules":[{"id":11,"versionId":6,"topologyId":6,"name":"average_time_GT_700","description":"Average Time spent on a URL is greater than 700 seconds","streams":["window_transform_stream_39"],"condition":"timespent_AVG > 700","sql":"SELECT *  FROM window_transform_stream_39 WHERE timespent_AVG > 700","actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.NotifierAction","name":"notifierAction","outputStreams":["rule_notifier_stream_9"],"notifierName":"Email Notifier","outputFieldsAndDefaults":{"from":"mukisoomar@gmail.com","to":"muki.demo.2@gmail.com","body":"Customer with Session Id : ${user_session_id} spent more than 900 seconds on the URL: ${url}. Please engage with the customer and follow up.","contentType":"text/plain","subject":"Please Engage Customer - ${user_session_id}"}}],"outputStreams":["rule_transform_stream_9","rule_notifier_stream_9"],"timestamp":1528311233037}],"windows":[{"id":8,"versionId":6,"topologyId":6,"name":"window_auto_generated","description":"window description auto generated","streams":["kafka_stream_38"],"window":{"windowLength":{"class":".Window$Duration","durationMs":10000},"slidingInterval":{"class":".Window$Duration","durationMs":10000},"tsField":null,"lagMs":0},"actions":[{"__type":"com.hortonworks.streamline.streams.layout.component.rule.action.TransformAction","name":"transformAction","outputStreams":["window_transform_stream_39"],"transforms":[]}],"projections":[{"functionName":"MEAN","args":["timespent"],"outputFieldName":"timespent_AVG"},{"expr":"clickstream_id"},{"expr":"user_session_id"},{"expr":"city"},{"expr":"state"},{"expr":"country"},{"expr":"url"}],"groupbykeys":["clickstream_id","user_session_id","city","state","country","url"],"outputStreams":["window_transform_stream_12","window_notifier_stream_12"],"timestamp":1528311233037}],"branchRules":[],"bundleIdToType":{"1":"KAFKA","12":"NOTIFICATION","4":"RULE","5":"WINDOW","16":"DRUID"},"topologyEditorMetadata":{"topologyId":6,"versionId":6,"data":"{\"sources\":[{\"x\":70.67268371582031,\"y\":198.57469177246094,\"id\":11}],\"sinks\":[{\"x\":904.6931762695312,\"y\":274.3603515625,\"id\":15},{\"x\":642.2374877929688,\"y\":-50.283613204956055,\"id\":14}],\"processors\":[{\"x\":407.49786376953125,\"y\":123.84159851074219,\"id\":12},{\"x\":597.771728515625,\"y\":210.79641723632812,\"id\":null},{\"x\":631.6970825195312,\"y\":274.3603515625,\"id\":13}],\"graphTransforms\":{\"dragCoords\":[-11.261742842525507,141.61574044953304],\"zoomScale\":0.8730111016439501},\"customNames\":null}","timestamp":1528311233037}}